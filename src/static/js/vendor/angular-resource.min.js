(function(e,t,n){"use strict";var r=t.$$minErr("$resource"),i=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(e,s){function o(e,t){this.template=e;this.defaults=t||{};this.urlParams={}}function a(m,g,y){function b(e,t){var s={};t=p({},g,t);h(t,function(t,o){v(t)&&(t=t());var a;if(t&&t.charAt&&"@"==t.charAt(0)){a=e;var f=t.substr(1);if(null==f||""===f||"hasOwnProperty"===f||!i.test("."+f))throw r("badmember",f);for(var f=f.split("."),l=0,c=f.length;l<c&&a!==n;l++){var h=f[l];a=null!==a?a[h]:n}}else a=t;s[o]=a});return s}function S(e){return e.resource}function x(e){d(e||{},this)}var T=new o(m);y=p({},l,y);h(y,function(i,o){var a=/^(POST|PUT|PATCH)$/i.test(i.method);x[o]=function(o,l,m,g){var y={},N,k,L;switch(arguments.length){case 4:L=g,k=m;case 3:case 2:if(v(l)){if(v(o)){k=o;L=l;break}k=l;L=m}else{y=o;N=l;k=m;break};case 1:v(o)?k=o:a?N=o:y=o;break;case 0:break;default:throw r("badargs",arguments.length)}var A=this instanceof x,O=A?N:i.isArray?[]:new x(N),M={},_=i.interceptor&&i.interceptor.response||S,P=i.interceptor&&i.interceptor.responseError||n;h(i,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(M[t]=d(e))});a&&(M.data=N);T.setUrlParams(M,p({},b(N,i.params||{}),y),i.url);y=e(M).then(function(e){var n=e.data,s=O.$promise;if(n){if(t.isArray(n)!==!!i.isArray)throw r("badcfg",i.isArray?"array":"object",t.isArray(n)?"array":"object");i.isArray?(O.length=0,h(n,function(e){O.push(new x(e))})):(d(n,O),O.$promise=s)}O.$resolved=!0;e.resource=O;return e},function(e){O.$resolved=!0;(L||c)(e);return s.reject(e)});y=y.then(function(e){var t=_(e);(k||c)(t,e.headers);return t},P);return A?y:(O.$promise=y,O.$resolved=!1,O)};x.prototype["$"+o]=function(e,t,n){v(e)&&(n=t,t=e,e={});e=x[o].call(this,e,this,t,n);return e.$promise||e}});x.bind=function(e){return a(m,p({},g,e),y)};return x}var l={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},c=t.noop,h=t.forEach,p=t.extend,d=t.copy,v=t.isFunction;o.prototype={setUrlParams:function(e,n,i){var s=this,o=i||s.template,a,l,c=s.urlParams={};h(o.split(/\W/),function(e){if("hasOwnProperty"===e)throw r("badname");!/^\d+$/.test(e)&&e&&RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(o)&&(c[e]=!0)});o=o.replace(/\\:/g,":");n=n||{};h(s.urlParams,function(e,r){a=n.hasOwnProperty(r)?n[r]:s.defaults[r];t.isDefined(a)&&null!==a?(l=encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),o=o.replace(RegExp(":"+r+"(\\W|$)","g"),l+"$1")):o=o.replace(RegExp("(/?):"+r+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})});o=o.replace(/\/+$/,"");o=o.replace(/\/\.(?=\w+($|\?))/,".");e.url=o.replace(/\/\\\./,"/.");h(n,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}};return a}])})(window,window.angular)
