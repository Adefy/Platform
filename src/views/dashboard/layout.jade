!!! 5
html(lang="en", data-ng-app="AdefyDashboard")
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")

    title Dashboard

    meta(name="description", content="")
    meta(name="author", content="Spectrum IT")
    meta(name="viewport", content="width=device-width, initial-scale=1")

    link(rel="shortcut icon", href="/img/favicon.ico", type="image/x-icon")

    script(type="text/javascript", src="/js/vendor/pace.min.js")

    link(rel="stylesheet", href="/css/vendor/pace-flash.min.css")
    link(rel="stylesheet", href="/css/vendor/bootstrap.min.css")
    link(rel="stylesheet", href="/css/vendor/bootstrap-overrides.min.css")

    link(rel="stylesheet", href="/css/vendor/font-awesome.min.css")
    link(rel="stylesheet", href="/css/vendor/uniform.default.css")
    link(rel="stylesheet", href="/css/vendor/select2.min.css")
    link(rel="stylesheet", href="/css/vendor/morris.min.css")

    link(rel="stylesheet", href="/css/theme/layout.min.css")
    link(rel="stylesheet", href="/css/theme/elements.min.css")
    link(rel="stylesheet", href="/css/theme/icons.min.css")
    link(rel="stylesheet", href="/css/theme/pages.min.css")

    link(rel="stylesheet", href="//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700")
    link(rel="stylesheet", href="//fonts.googleapis.com/css?family=Oleo+Script&text=Adefy")

    | <!--[if lt IE 9]>
    |   <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    | <![endif]-->

  body#page-dashboard

    header.navbar.navbar-inverse
      .navbar-header
        button(type="button", data-toggle="collapse", data-target=".nb-links").navbar-toggle
          span.icon-bar
          span.icon-bar
          span.icon-bar
        a.navbar-brand(href="/dashboard") Adefy
      ul.nav.navbar-nav.pull-right.hidden-xs
        li
          a(href="/dashboard/acc/funds") $0.00 Advertising Credit
        li
          a(href="/dashboard/acc/funds") $0.00 Publisher Balance
        li.dropdown
          a(href="javascript:void(0)", data-toggle="dropdown").dropdown-toggle.hidden-xs.hidden-sm
            | My Account
            b.caret
          ul.dropdown-menu
            li
              a(href="/dashboard/acc/info") Account Information
            li
              a(href="/dashboard/acc/billing") Billing and Payments
            li
              a(href="/dashboard/acc/funds") Add Funds
            li
              a(href="/dashboard/acc/feedback") Send Feedback
        li.logout.hidden-x.hidden-sm
          a(href="/logout", target="_self")
            i.icon-signout

    #sidebar-nav
      ul#dashboard-menu

        li(data-ng-class="{ active: tab == \"home\" }")
          .pointer(data-ng-if="tab == \"home\"")
            .arrow
            .arrow_border
          a(href="/dashboard")
            i.icon-home
            span Dashboard

        li(data-ng-class="{ active: tab == \"reporting\" }")
          .pointer(data-ng-if="tab == \"reporting\"")
            .arrow
            .arrow_border
          a(href="/dashboard/reports")
            i.icon-signal
            span Reports

        li(data-ng-class="{ active: tab == \"ads\" }")
          .pointer(data-ng-if="tab == \"ads\"")
            .arrow
            .arrow_border
          a(href="/dashboard/ads/listing").dropdown-toggle
            i.icon-sitemap
            span Ads
            i.icon-chevron-down

          ul.submenu(data-ng-class="{ active: tab == \"ads:listing\" || tab == \"ads:campaigns\" }")
            li(data-ng-class="{ active: tab == \"ads:listing\" }")
              a(href="/dashboard/ads/listing") Ad Listing
            li(data-ng-class="{ active: tab == \"ads:campaigns\" }")
              a(href="/dashboard/ads/campaigns") Campaigns

        li(data-ng-class="{ active: tab == \"apps\" }")
          .pointer(data-ng-if="tab == \"apps\"")
            .arrow
            .arrow_border
          a(href="/dashboard/apps")
            i.icon-rocket
            span Apps

        li(data-ng-class="{ active: tab == \"account:info\" || tab == \"account:billing\" || tab == \"account:funds\" || tab == \"account:feedback\" }")
          .pointer(data-ng-if="tab == \"account:info\" || tab == \"account:billing\" || tab == \"account:funds\" || tab == \"account:feedback\"")
            .arrow
            .arrow_border
          a(href="/dashboard/acc/info").dropdown-toggle
            i.icon-cogs
            span Account
            i.icon-chevron-down

          ul.submenu(data-ng-class="{ active: tab == \"account:info\" || tab == \"account:billing\" || tab == \"account:funds\" || tab == \"account:feedback\" }")
            li(data-ng-class="{ active: tab == \"account:info\" }")
              a(href="/dashboard/acc/info") Account Information
            li(data-ng-class="{ active: tab == \"account:billing\" }")
              a(href="/dashboard/acc/billing") Billing and Payments
            li(data-ng-class="{ active: tab == \"account:funds\" }")
              a(href="/dashboard/acc/funds") Add Funds
            li(data-ng-class="{ active: tab == \"account:feedback\" }")
              a(href="/dashboard/acc/feedback") Send Feedback

        li(data-ng-class="{ active: tab == \"support\" }")
          .pointer(data-ng-if="tab == \"support\"")
            .arrow
            .arrow_border
          a(href="/dashboard/support")
            i.icon-question
            span Support

        if locals.admin
          li(data-ng-class="{ active: tab == \"admin:home\" || tab == \"admin:users\" || tab == \"admin:invites\" }")
            .pointer(data-ng-if="tab == \"admin:home\" || tab == \"admin:users\" || tab == \"admin:invites\"")
              .arrow
              .arrow_border
            a(href="/dashboard/admin").dropdown-toggle
              i.icon-fighter-jet
              span Admin
              i.icon-chevron-down

            ul.submenu(data-ng-class="{ active: tab == \"admin:home\" || tab == \"admin:users\" || tab == \"admin:invites\" }")
              li(data-ng-class="{ active: tab == \"admin:home\" }")
                a(href="/dashboard/admin") Dashboard
              li(data-ng-class="{ active: tab == \"admin:users\" }")
                a(href="/dashboard/admin/users") Users
              li(data-ng-class="{ active: tab == \"admin:invites\" }")
                a(href="/dashboard/admin/invites") Invites

    .content(data-ng-view="")

    footer
      script(type="text/javascript", src="/js/vendor/jquery.js")
      script(type="text/javascript", src="/js/vendor/jquery.uniform.min.js")raphael
      script(type="text/javascript", src="/js/vendor/raphael.js")
      script(type="text/javascript", src="/js/vendor/morris.min.js")
      script(type="text/javascript", src="/js/vendor/angular.js")
      script(type="text/javascript", src="/js/vendor/angular-route.min.js")
      script(type="text/javascript", src="/js/vendor/angular-country-select.min.js")
      script(type="text/javascript", src="/js/vendor/bootstrap.min.js")
      script(type="text/javascript", src="/js/vendor/bootbox.min.js")
      script(type="text/javascript", src="/js/vendor/fuelux.wizard.js")
      script(type="text/javascript", src="/js/vendor/select2.min.js")
      script(type="text/javascript", src="/socket.io/socket.io.js")

      script(type="text/javascript")
        var socket = io.connect("", { secure: true });
        window.AdefyDashboard = angular.module("AdefyDashboard", ["ngRoute", "countrySelect"]);

      if locals.admin
        script(type="text/javascript", src="/client/dashboard/admin-config.js")
      else
        script(type="text/javascript", src="/client/dashboard/normal-config.js")

      script(type="text/javascript")

        $(document).ready(function() {

          // Sidebar menu dropdown toggle
          $("#dashboard-menu .dropdown-toggle").click(function (e) {
            $(this).parent().find(".submenu").slideDown("fast", function() {
              $(this).addClass("down");
            });
          });

          // Mobile side-menu slide toggle
          var menu = $("#sidebar-nav");

          $("body").click(function () {
            if ($(this).hasClass("menu")) { $(this).removeClass("menu"); }
          });

          menu.click(function(e) { e.stopPropagation(); });

          $(".navbar-toggle").click(function (e) {
            e.stopPropagation();
            $("body").toggleClass("menu");
          });

          $(window).resize(function() {
            $(this).width() > 769 && $("body.menu").removeClass("menu")
          });

        });

        window.AdefyDashboard.run(function($rootScope) {

          $rootScope.$on("$routeChangeSuccess", function(e, current, old) {

            if(current.loadedTemplateUrl !== undefined) {

              // Update tab
              var vals = current.loadedTemplateUrl.split("/");
              $rootScope.tab = vals[vals.length - 1];
            }

            // Slide up menus after a brief delay to give things a chance to settle down
            setTimeout(function() {
              $("#dashboard-menu .submenu.down:not(.active)").removeClass("down").slideUp("fast");
            }, 100);
          });
        });

      script(type="text/javascript", src="/client/dashboard/ctrl/dashboard.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/apps.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/ads/listing.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/ads/campaigns.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/account/information.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/account/billing.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/account/funds.js")
      script(type="text/javascript", src="/client/dashboard/ctrl/account/feedback.js")

      if locals.admin
        script(type="text/javascript", src="/client/dashboard/ctrl/admin/home.js")
        script(type="text/javascript", src="/client/dashboard/ctrl/admin/invites.js")
        script(type="text/javascript", src="/client/dashboard/ctrl/admin/users.js")